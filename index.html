<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>ล็อกอิน</title>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  <script src="firebase-config.js"></script>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h2>เข้าสู่ระบบ</h2>
  <input id="loginName" placeholder="ชื่อจริง (ภาษาไทย)">
  <input id="loginPass" type="password" placeholder="รหัสผ่าน">
  <button onclick="login()">เข้าสู่ระบบ</button>

  <script>
    const db = firebase.firestore();

    function login() {
      const name = document.getElementById('loginName').value.trim();
      const pass = document.getElementById('loginPass').value.trim();

      db.collection("users")
        .where("username", "==", name)
        .where("password", "==", pass)
        .get()
        .then(snapshot => {
          if (snapshot.empty) {
            alert("ชื่อผู้ใช้หรือรหัสผ่านไม่ถูกต้อง");
          } else {
            const userId = snapshot.docs[0].id;
            localStorage.setItem("userId", userId); // ใช้เพื่อโหลดข้อมูลในหน้า user.html
            window.location.href = "user.html"; // ไปหน้า user หลังล็อกอิน
          }
        });
    }
  </script>
</body>
</html>
